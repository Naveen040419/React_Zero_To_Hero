<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Babel standalone -->
   <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- React -->
   <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>

   <!-- React DOM -->
   <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

</head>
<body>

    <div id = "root">

    </div>

    <script type = "text/babel">

    let score = 0;
    let wicket = 0;

    let ballWiseRes = [];

    let hit = 0;

    // We can access the dom element using ref in react...

    let inputRef = React.createRef();

    // Function is called automatically on render,
    // so for that we don't pass parentheses...
    // we Just pass the reference of function... ( clickOne() -> call now )

    // function clickOne(){
    //     alert("1 is clicked");
    // }

    // function addOne(){
    //    score = score + 1; 
    //    rootElement.render( <App /> );
    //    console.log("Score: ", score);
    // }

    function increaseScore(runs){
        if( wicket < 10 ){

            // ballWiseRes.push(runs);
            // console.log("Ball wise results: ", ballWiseRes);

            // score += runs;
            // rootElement.render( <App /> );
            // console.log("Score: ", score);

            hit = runs;
            rootElement.render( <App /> );
        } else{
            alert("Game is over");
        } 
    }

    function addWicket(){
        if( wicket < 10 ){

          // ballWiseRes.push('W');
          // console.log("Ball wise results: ", ballWiseRes);

          // wicket = wicket+1;
          // rootElement.render( <App/>)

          hit = 'W';
          rootElement.render( <App/>)
        }else{ 
            alert("Game is over");      
        }  
    }


    // Creating a Component for the score buttons...

    const ScoreButtons = () => {
        return( 
        <div>
            <button onClick = { () => increaseScore(0)}> 0 </button>
            <button onClick = { () => increaseScore(1)}> 1 </button>
            <button onClick = { () => increaseScore(2)}> 2 </button>
            <button onClick = { () => increaseScore(3)}> 3 </button>
            <button onClick = { () => increaseScore(4)}> 4 </button>
            <button onClick = { () => increaseScore(5)}> 5 </button>
            <button onClick = { () => increaseScore(6)}> 6 </button>
            <button onClick = { addWicket }> Wicket </button>
        </div>
     )
    }


    // New Thing is when we write {} inside component we used return statemnt
    // but when we write () we don't use return statement...( implicit return )

    // bcoz the falsy values -> null, 0, undefined, false and "" are not rendered.

    // condition ? (JSX) : (JSX)

  //  const Result = () => {
  //   return (
  //   <div>
  //     {ballWiseRes.map((res, index) => (

  //       <React.Fragment key={index}>
  //       {index % 6 === 0 && index !== 0 && <br />}
  //         <span>
  //           {res === 0 ? ( <strong>.</strong> ) : res === "W" ? (
  //             <strong style={{ color: "red" }}>W</strong>
  //           ) : ( res )}
  //           &nbsp;
  //         </span>
  //       </React.Fragment>

  //     ))}
  //   </div>
  //   );
  //  };


   // Forms in JSX...( button have internal property the page is reloaded )
   // Html elements have internal properties...
   // To avoid that we use event.preventDefault() method...
   // or synthetic event in react...( wrapper around dom element event or browser event)

   // ballWishes.unshift -> I want current commentary in first...

   // info -> The createRef is uncontrolled component...
   // It is not dependent on the react component, it is directly connected to the dom element...
   // It is automatically updated by react when the dom element is changed...

   function handleSubmit( event ){
    event.preventDefault();
    //  alert(" Form Submitted ");

    if( hit == "W" ? wicket ++ : score += hit );

    ballWiseRes.unshift(hit);
    console.log(" Ball wise results: ", ballWiseRes);

    hit = 0;
    inputRef.current.value = "";

    rootElement.render( <App/> )
    }

  // ref for referencing dom element...

   const Forms = () => (
    <form onSubmit = { () => handleSubmit(event) } > 
        <input value = {hit}/> 
        <input ref = {inputRef} placeholder="Enter commentary" />
        <button> Submit </button> 
    </form>
    )

    function App(){
        return(
            <>
            <h1> Score Keeper App </h1>
            <h3> Score {score}/{wicket} </h3>
            <ScoreButtons/>
            <br/>
            <Forms/>
            <hr/>
            <h2> Ball wise Results </h2>

            { ballWiseRes.map( (res, index) => (
              <React.Fragment key={index}>

              <span > {res} </span> &nbsp; &nbsp; &nbsp;
              <span> {inputRef.current.value} </span> <br/>

              </React.Fragment>
            ))}
  
            </>
        )
    }

    const rootElement = ReactDOM.createRoot( document.getElementById("root") )
    rootElement.render( <App /> );
    </script>
    
</body>
</html>